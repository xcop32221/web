<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
   
    <div>
        <h2>使用POST发送请求</h2>
        <div>请求数据: <span id="requestData"></span></div>
        <input type="nameInput" />
        <button id="post">post请求</button>
    </div>
    <script>
        //点击按钮，发送请求 192.168.22.24：4000/ping GET
        const result = document.querySelector('#res')
        const submit = document.querySelector('#submit')

        //dom 0级事件：只能加一个
        //dom 2级事件：可以加多个  监听需要取消掉，触发一次

        //IO任务，添加在IO线程中监听，触发添加任务队列
        submit.onclick = () => {
            //实例化请求对象
            const xhr = new XMLHttpRequest()

            //监听连接数据：这里如果请求成功后，就向任务队列中添加任务

            xhr.onreadystatechange = () => {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    console.log(xhr.responseText)
                    //把结果显示出来
                    result.innerHTML = '请求成功'
                }
            }
            //打开请求
            xhr.open('GET', 'http://192.168.22.24:4000/ping')


            //发送请求
            xhr.send()

            result.innerHTML = '正在加载中....'


        }

    </script>
    
</body>

</html>