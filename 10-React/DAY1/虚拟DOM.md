# 虚拟DOM

#### 定义：

在React中操作的元素称为React元素，并不是真实的Dom元素

React通过虚拟DOM将React元素和原生DOM进行映射，虽然操作的React元素，但是这些操作最终都会在真实DOM中体现



#### 优点：

1.降低ApI复杂度

2.解决兼容问题

3.提升性能，减少DOM不必要操作



#### 实现：

1. 每当我们调用root.render()时，页面就会发生重新渲染

2. React会通过diffing算法，将新的元素和新的元素进行比较：通过比较找到发生变化的元素，并且只对变化的元素进行修改

   ​

#### 过程：

1. 比较两次数据时，React会先比较父元素，父元素如果不同，直接所有元素全部替换
2. 父元素一致，逐个比较子元素，直到找到所有发生变化的元素为止



#### key属性：

JSX中显示数组时，数组中每一个元素都需要设置一个唯一的key：

**场景：**

当重新渲染页面时，React会按照顺序依次比较对应的元素，当渲染一个列表时，如果不指定key，同样会按照顺序比较

**问题：**

如果列表的顺序永远不发生变化，没有问题；如果列表顺序改变了，会造成性能问题

​	如果列表的顺序永远不发生变化，没有问题；如果列表顺序改变了，会造成性能问题

ex：在列表最前面插入新元素，其他元素内容没有发生变化

但是由于新元素插入到开始位置，其余元素的位置全都发生改变，	而	    React默认是根据内容比较，所有元素被修改



**解决：**不根据顺序去比较

key作用相当于ID，比较的时候按照key去查找差异



**方案:**

map返回的react元素中，key的标签为数组索引